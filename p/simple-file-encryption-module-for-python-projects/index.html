<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="tl;dr Plasm focuses on a very specific use case: encrypting and decrypting files using public key encryption. If plasm doesn&rsquo;t fit the scope of what you want to do, feel free to have a look at pynacl&rsquo;s documentation and use it directly.
Why I have experimented a lot with camera software for the Raspberry Pi. One project that particularly stuck with me is motionEye, a web frontend for the motion daemon, which allows you to easily set up an open source motion triggered camera for about 50€.
"><meta name=author content="Valentin Heidelberger"><link rel=canonical href=https://valh.io/p/simple-file-encryption-module-for-python-projects/><link rel=icon type=image/x-icon href=/img/favicon.ico><title>Simple file encryption module for Python projects</title><link rel=stylesheet href=/css/styles.css><link rel=stylesheet href=/css/syntax.css><link id=custom_css href=/css/custom.css rel=stylesheet><link id=dark_css href=/css/dark.css rel=stylesheet><link href=/css/webfonts/fontawesome.min.css rel=stylesheet><link href=/css/webfonts/brands.min.css rel=stylesheet><link href=/css/webfonts/solid.min.css rel=stylesheet><link href=/css/webfonts/regular.min.css rel=stylesheet></head><body><nav class="navbar navbar-expand-lg navbar-light" id=mainNav><div class="container px-4 px-lg-5"><a class=navbar-brand href=/index.html><picture><source srcset=/img/logo_small_dark.webp media="(max-width: 991px) and (prefers-color-scheme: light)"><source srcset=/img/logo_small.webp media="(max-width: 991px) and (prefers-color-scheme: dark)"><source srcset=/img/logo_small.webp media="(min-width: 992px)"><img class=navbar-logo>
</picture>Valentin Heidelberger
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarResponsive aria-controls=navbarResponsive aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i></button><div class="collapse navbar-collapse" id=navbarResponsive><ul class="navbar-nav ms-auto py-4 py-lg-0"><li class=nav-item><a class="nav-link px-lg-3 py-3 py-lg-4 active" title=Blog href=/index.html><span class="fa fa-book-open"></span>
<span>Blog</span></a></li><li class=nav-item><a href=/search/ class="nav-link px-lg-3 py-3 py-lg-4" title=Search><span class="fa fa-search nav-search-icon"></span>
<span>Search</span></a></li><li class=nav-item><a class="nav-link px-lg-3 py-3 py-lg-4" title="About me" href=/about-me><span class="fas fa-user"></span>
<span>About me</span></a></li></ul></div></div></nav><header class=masthead style=background-image:url(/img/blog-bg.webp)><div class="container position-relative px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><div class=post-heading><h1>Simple file encryption module for Python projects</h1><h2 class=subheading>An introduction to plasm</h2><span class=meta>Posted on September 08, 2018</span>
<span class=meta>Note that this post is older than 3 years and might contain out-of-date information.</span>
<span class=meta>Tags:
<a href=/tags/technology>#technology</a></span></div></div></div></div></header><article class=mb4><aside id=custom_toc><nav id=TableOfContents><ul><li><a href=#tldr>tl;dr</a></li><li><a href=#why>Why</a></li><li><a href=#what-it-is>What it is</a></li><li><a href=#installation-and-how-it-works>Installation and how it works</a></li><li><a href=#integration-with-motioneye>Integration with motionEye</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></aside><div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><h1 id=tldr>tl;dr</h1><p>Plasm focuses on a very specific use case: encrypting and decrypting files using public key encryption. If plasm doesn&rsquo;t fit the scope of what you want to do, feel free to have a look at <a href=https://pynacl.readthedocs.io>pynacl&rsquo;s documentation</a> and use it directly.</p><h1 id=why>Why</h1><p>I have experimented a lot with camera software for the Raspberry Pi. One project that particularly stuck with me is <a href=https://github.com/ccrisan/motioneye>motionEye</a>, a web frontend for the motion daemon, which allows you to easily set up an open source motion triggered camera for about 50€.</p><p>MotionEye also offers a cloud upload functionality, which I like a lot. Unfortunately it doesn&rsquo;t allow the user to encrypt their media files before uploading them. Since I wanted to use Google Drive as my data grave but at the same time not upload unencrypted media files into the cloud, I decided to build a simple python module to easily hack file encryption into motionEye.</p><h1 id=what-it-is>What it is</h1><p>The result of this is <a href=https://github.com/va1entin/plasm>plasm</a>, which stands for <code>PynacL AbStraction Module</code>. Plasm is based on <a href=https://github.com/pyca/pynacl>pynacl</a>, which in turn binds to <a href=https://libsodium.org>libsodium</a>.</p><p>Plasm uses public key encryption and is supposed to make the <strong>creation of public key pairs</strong> as well as <strong>encryption and decryption of files</strong> very simple.</p><p>One key requirement for me was that plasm had to be able to encrypt using only a public key. The private key, which is required to decrypt, shouldn&rsquo;t be required so that I could store it in a safe place on another device. To accomplish this, I chose to use the <code>sealedBox</code> construct, because it only requires a public key. The main difference of the <code>sealedBox</code> compared to another construct simply called <code>Box</code> is that it doesn&rsquo;t offer cryptographic proof of the sender’s authorship, which is out of scope for plasm anyway.</p><p>Additionally, I wanted to protect the private key by encrypting it as well using secret key encryption. That&rsquo;s why plasm requires a password for creating a key pair and decrypting files. The password is used to encrypt and decrypt the key so that an attacker needs both the private key file <strong>and</strong> the password to be able to decrypt files.</p><h1 id=installation-and-how-it-works>Installation and how it works</h1><p>Please have a look at the <a href=https://github.com/va1entin/plasm/blob/master/README.md>README</a> to find out how to use plasm.</p><p>Plasm is currently not available via PyPi, but you can install it directly from Github as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/va1entin/plasm/archive/refs/heads/master.zip -O plasm-master.zip
</span></span><span class=line><span class=cl>pip3 install plasm-master.zip
</span></span></code></pre></div><h1 id=integration-with-motioneye>Integration with motionEye</h1><p>The integration with motionEye currently requires a little patch to be applied to it&rsquo;s <code>uploadservices.py</code>, which is located at <code>/usr/local/lib/python2.7/dist-packages/motioneye/uploadservices.py</code> on Raspbian. You can download it directly <a href=https://github.com/va1entin/plasm/raw/master/integrations/motioneye-uploadservices.patch>here</a> (right click -> save as).</p><p>Make sure to change the path to your public key accordingly and add <code>remove_input_file=True</code> as shown in the <a href=https://github.com/va1entin/plasm/blob/master/README.md>README</a>, if you want plasm to remove the unencrypted input file once encryption is finished.</p><p>Plasm also logs what it&rsquo;s doing using the logging module by default. Most logging happens at debug log level currently. Have a look at the <a href=https://github.com/ccrisan/motioneye/wiki/Configuration-File>motionEye wiki</a> to find out how to enable debug logging.</p><h1 id=conclusion>Conclusion</h1><p>Plasm is licensed under the Apache 2.0 License. Feel free to report issues or create merge requests at <a href=https://github.com/va1entin/plasm>Github</a>. Please note that I don&rsquo;t plan to extend plasm&rsquo;s scope on other use cases at the moment to keep it as simple as possible. If plasm doesn&rsquo;t fit the scope of what you want to do, feel free to have a look at <a href=https://pynacl.readthedocs.io>pynacl&rsquo;s documentation</a> and use it directly.</p><br></div></div></div></article><footer class=border-top><div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><ul class="list-inline text-center"><li class=list-inline-item><a href=/index.xml target=_blank><i style=margin:.25em class="fa fa-rss fa-2xl"></i></a></li><li class=list-inline-item><a href=https://github.com/va1entin target=_blank><i style=margin:.25em class="fab fa-github fa-2xl"></i></a></li><li class=list-inline-item><a href=https://gitlab.com/va1entin target=_blank><i style=margin:.25em class="fab fa-gitlab fa-2xl"></i></a></li><li class=list-inline-item><a href=https://www.linkedin.com/in/va1entin target=_blank><i style=margin:.25em class="fab fa-linkedin fa-2xl"></i></a></li><div class="small text-center text-muted fst-italic"><br><br><a rel=license href=http://creativecommons.org/licenses/by/4.0/ target=_blank>CC-BY 4.0 International</a> Valentin Heidelberger 2017 - 2024<br>This applies to the contents of my blog and other texts on this site only.<br><a href=/terms-of-use>Terms of use</a><br><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Built with a <a href=https://github.com/va1entin/hugo-theme_clean-blog-custom target=_blank>custom version</a> of the <a href=https://github.com/StartBootstrap/startbootstrap-clean-blog/ target=_blank>Clean Blog theme</a> by <a href=https://startbootstrap.com target=_blank>StartBootstrap</a></div></ul><br><br></div></div></div></footer><script src=/js/bootstrap.bundle.min.js></script><script src=/js/scripts.js></script></body></html>