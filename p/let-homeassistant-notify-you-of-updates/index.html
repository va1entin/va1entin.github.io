<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="HomeAssistant releases new updates very regularly. Each month there is a new release which usually receives several patch releases as well. If you want to keep up with updates or even update automatically, it&rsquo;s nice to get notified upon the release of an update.
Prerequisites HomeAssistant has a built-in updater sensor which automatically checks for the updates and changes state, if it finds one. This can be used as trigger in an automation. The automation&rsquo;s action can do all kinds of things; e.g. send a notification to a phone, which has the HomeAssistant app installed.
"><meta name=author content="Valentin Heidelberger"><link rel=canonical href=https://valh.io/p/let-homeassistant-notify-you-of-updates/><link rel=icon type=image/x-icon href=/img/favicon.ico><title>Let HomeAssistant notify you of updates</title><link rel=stylesheet href=/css/styles.css><link rel=stylesheet href=/css/syntax.css><link id=custom_css href=/css/custom.css rel=stylesheet><link id=dark_css href=/css/dark.css rel=stylesheet><link href=/css/webfonts/fontawesome.min.css rel=stylesheet><link href=/css/webfonts/brands.min.css rel=stylesheet><link href=/css/webfonts/solid.min.css rel=stylesheet><link href=/css/webfonts/regular.min.css rel=stylesheet></head><body><nav class="navbar navbar-expand-lg navbar-light" id=mainNav><div class="container px-4 px-lg-5"><a class=navbar-brand href=/index.html><picture><source srcset=/img/logo_small_dark.webp media="(max-width: 991px) and (prefers-color-scheme: light)"><source srcset=/img/logo_small.webp media="(max-width: 991px) and (prefers-color-scheme: dark)"><source srcset=/img/logo_small.webp media="(min-width: 992px)"><img class=navbar-logo>
</picture>Valentin Heidelberger
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarResponsive aria-controls=navbarResponsive aria-expanded=false aria-label="Toggle navigation">
Menu
<i class="fas fa-bars"></i></button><div class="collapse navbar-collapse" id=navbarResponsive><ul class="navbar-nav ms-auto py-4 py-lg-0"><li class=nav-item><a class="nav-link px-lg-3 py-3 py-lg-4 active" title=Blog href=/index.html><span class="fa fa-book-open"></span>
<span>Blog</span></a></li><li class=nav-item><a href=/search/ class="nav-link px-lg-3 py-3 py-lg-4" title=Search><span class="fa fa-search nav-search-icon"></span>
<span>Search</span></a></li><li class=nav-item><a class="nav-link px-lg-3 py-3 py-lg-4" title="About me" href=/about-me><span class="fas fa-user"></span>
<span>About me</span></a></li></ul></div></div></nav><header class=masthead style=background-image:url(/img/tags/home.webp)><div class="container position-relative px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><div class=post-heading><h1>Let HomeAssistant notify you of updates</h1><h2 class=subheading></h2><span class=meta>Posted on June 11, 2021</span>
<span class=meta>Note that this post is older than 3 years and might contain out-of-date information.</span>
<span class=meta>Tags:
<a href=/tags/technology>#technology
</a><a href=/tags/homeassistant>#homeassistant</a></span></div></div></div></div></header><article class=mb4><aside id=custom_toc><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#automation>Automation</a></li><li><a href=#activation-switch>Activation switch</a></li></ul></nav></aside><div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><p><a href=https://www.home-assistant.io/>HomeAssistant</a> releases new updates very regularly. Each month there is a new release which usually receives several patch releases as well. If you want to keep up with updates or even update automatically, it&rsquo;s nice to get notified upon the release of an update.</p><h1 id=prerequisites>Prerequisites</h1><p>HomeAssistant has a built-in updater sensor which automatically checks for the updates and changes state, if it finds one. This can be used as <code>trigger</code> in an automation. The automation&rsquo;s <code>action</code> can do all kinds of things; e.g. send a notification to a phone, which has the HomeAssistant app installed.</p><p>Having installed the HomeAssistant app on your phone, you can send notifications to it via HomeAssistant - including from an automation. The <a href=https://www.home-assistant.io/integrations/mobile_app/>Mobile app integration</a> must be enabled for this to work - it is by default.</p><p>If you want to be extra sure that the notification always arrives immediately, I&rsquo;d suggest deactivating any battery optimization for the HomeAssistant app - at least on the recent versions of Android that goes for pretty much any app that sends notifications which you want to be sure to get without waking your phone from doze.</p><p>You can do it in the system settings; depending on the Android variant the path in the settings might vary but usually it&rsquo;s here: <em>Apps</em> -> <em>See all apps</em> -> <em>HomeAssistant</em> -> <em>Advanced</em> -> <em>Battery optimization</em> -> <em>Don&rsquo;t optimize</em>.</p><h1 id=automation>Automation</h1><p>Using the updater sensor and app notification functionality, one can built an automation which sends a notification upon state change of <code>binary_sensor.updater</code>. You can find my automation snippet <a href=https://github.com/va1entin/homeassistant-config/blob/b69451aba22034d2838bb9a5ae0c13e7bdfbd53e/automation/version.yaml>on GitHub</a>.</p><p>The automation uses the most recent version&rsquo;s number in it&rsquo;s output text - this is accomplished by referencing an attribute of <code>binary_sensor.updater</code> called <code>newest_version</code>. You can change the notification&rsquo;s content as you please by modifying the attributes below <code>action</code> -> <code>data</code> in the snippet.</p><p>Unless you have the exact same phone model as me, you <strong>must</strong> change the <code>service</code> in the automation&rsquo;s <code>action</code>. In my case it&rsquo;s set to <code>notify.mobile_app_oneplus_nord_n105g</code> - you must change it to your phone after having installed the HomeAssistant app and registered it with your instance.</p><p>The ID of your phone inside HomeAssistant can be found by opening the list of integrations <code>&lt;your homeassistant instance ip or hostname>/config/integrations</code>, finding your phone there and clicking on the blue link <code>... entities</code>. In the entity list, you&rsquo;ll find a column called <code>Entity ID</code> and copy the phone&rsquo;s name from there, replacing anything before the dot with <code>notify</code> as seen in the automation snippet.</p><p>The automation can be tested by setting the state of <code>binary_sensor.updater</code> from <code>off</code> to <code>on</code> in the HomeAssistant Developer Tools: <code>&lt;your homeassistant instance ip or hostname>/developer-tools/state</code></p><p>If the state was already <code>on</code>, you need to set it to <code>off</code> first.</p><p>The state change to <code>on</code> should trigger the automation and produce a notification like so:</p><p><img src=/img/posts/homeassistant_version_notification.webp alt="HomeAssistant version notification on Android"></p><h1 id=activation-switch>Activation switch</h1><p>Usually I also add a switch (&ldquo;boolean input&rdquo;) to my automations so I can quickly toggle functionalities from the HomeAssistant dashboard separate from the Automations config section. The code snippet for that can be found <a href=https://github.com/va1entin/homeassistant-config/blob/b69451aba22034d2838bb9a5ae0c13e7bdfbd53e/input_boolean/version.yaml>on GitHub</a> as well.</p><p>It&rsquo;s being referenced in the automation snippet, so you need to either add this switch as well as the automation or remove the relevant lines, if you don&rsquo;t want the switch.</p><p>Having added it to a card called &ldquo;Notifications&rdquo;, it looks like this in the HomeAssistant dashboard:</p><p><img src=/img/posts/homeassistant_update_notifications_switch.webp alt="HomeAssistant version notification switch"></p><br></div></div></div></article><footer class=border-top><div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-md-10 col-lg-8 col-xl-7"><ul class="list-inline text-center"><li class=list-inline-item><a href=/index.xml target=_blank><i style=margin:.25em class="fa fa-rss fa-2xl"></i></a></li><li class=list-inline-item><a href=https://github.com/va1entin target=_blank><i style=margin:.25em class="fab fa-github fa-2xl"></i></a></li><li class=list-inline-item><a href=https://gitlab.com/va1entin target=_blank><i style=margin:.25em class="fab fa-gitlab fa-2xl"></i></a></li><li class=list-inline-item><a href=https://www.linkedin.com/in/va1entin target=_blank><i style=margin:.25em class="fab fa-linkedin fa-2xl"></i></a></li><div class="small text-center text-muted fst-italic"><br><br><a rel=license href=http://creativecommons.org/licenses/by/4.0/ target=_blank>CC-BY 4.0 International</a> Valentin Heidelberger 2017 - 2024<br>This applies to the contents of my blog and other texts on this site only.<br><a href=/terms-of-use>Terms of use</a><br><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Built with a <a href=https://github.com/va1entin/hugo-theme_clean-blog-custom target=_blank>custom version</a> of the <a href=https://github.com/StartBootstrap/startbootstrap-clean-blog/ target=_blank>Clean Blog theme</a> by <a href=https://startbootstrap.com target=_blank>StartBootstrap</a></div></ul><br><br></div></div></div></footer><script src=/js/bootstrap.bundle.min.js></script><script src=/js/scripts.js></script></body></html>